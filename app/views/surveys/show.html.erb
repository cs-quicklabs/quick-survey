<div class="px-2 py-2  sm:flex sm:items-center sm:justify-between sm:px-4 border-b border-gray-200" id="survey-header">
  <div class="flex-wrap p-4 items-baseline -mt-2" >
    <h3 class="text-2xl font-bold leading-tight text-gray-900">
      <%= @survey.name.titleize %>
    </h3>
    <p class="mt-1 text-sm text-gray-500 truncate"><%= @survey.description %></p>
  </div>
  <div class="flex mt-2 sm:mt-0 sm:ml-4">
    <div>
      <div data-controller="dropdown"  class="flex items-center justify-between mt-3">

              <!-- This example requires Tailwind CSS v2.0+ -->
              <span class="relative z-0 inline-flex rounded-md shadow-sm">
               
                <span class="relative block -ml-px">
                  <button data-action="click->dropdown#toggle click@window->dropdown#hide"  type="button"  value="Submit" class="inline-flex bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer" id="option-menu-button" aria-expanded="true" aria-haspopup="true">
                    <span>Action</span>
                    <!-- Heroicon name: solid/chevron-down -->
                    <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                      <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                  </button>
                  <div data-dropdown-target="menu" class="absolute right-0 z-10 w-56 mt-2 -mr-1 origin-top-right bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none" role="menu" aria-orientation="vertical" aria-labelledby="option-menu-button" tabindex="-1">
                    <div class="py-1" role="none">
                      <!-- Active: "bg-gray-100 text-gray-900", Not Active: "text-gray-700" -->
                     <%= confirm_button(clone_survey_path(@survey), "Clone", "Are you sure? This will create a new survey by copying everything from this survey?", "cursor-pointer bg-white block w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-50") %>
                      <%= link_to "Attempt", new_attempt_path(@survey), class: "cursor-pointer bg-white block w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-50" %>
                      <%= link_to "Edit", edit_survey_path(@survey), class: " cursor-pointer bg-white block w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-50" %>
                      <%if @survey.active?%>
                       <%=confirm_button(archive_survey_path(@survey), "Archive", "Are you sure you want to archive this survey?", "cursor-pointer bg-white block w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-50")%>

                      <%else%>
                                            <%=confirm_button(unarchive_survey_path(@survey), "Activate", "Are you sure you want to activate this survey?", "cursor-pointer bg-white block w-full px-4 py-2 text-sm text-left text-gray-700 hover:bg-gray-50")%>
                     
                      <% end %>
                    </div>
                  </div>
                </span>
              </span>
            </div>
    </div>
  </div>
</div>
<div class="grid items-start grid-cols-1  lg:grid-cols-3 ">
  <!-- Left column -->
  <div class="grid grid-cols-1 gap-4 lg:col-span-2">
    <section aria-labelledby="participants_section">
      <div class="overflow-hidden bg-white">
        <div class="w-full overflow-hidden" >
          <div class="p-4">
            <div class="flex flex-wrap">
              <p class="pb-2 mt-1 text-sm pl-4 font-medium text-gray-900 truncate"><%= "Survey Questions (" + @survey.questions.load.size.to_s + ")" %></p>
            </div>
            <ul class="space-y-6 pl-1" id="questions">
              <%= render partial: "surveys/questions/question", collection: @survey.questions.order(updated_at: :desc) %>
            </ul>
          </div>
        </div>
      </section>
    </div>
    <!-- Right column -->
    <div class="grid grid-cols-1 gap-4 xl:border-l xl:border-gray-200">
      <section aria-labelledby="add-participant-section">
        <div class="overflow-hidden bg-white">
          <div class="px-4 ">
            <%= render partial: "surveys/questions/form", locals: { survey: @survey, question: @question } %>
          </div>
        </div>
      </section>
    </div>
  </div>
